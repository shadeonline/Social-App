{% extends 'base.html' %}
{% load static %}

{% block content %}
{% if user.is_authenticated %}
<div class="card" style="width: 90%;">
    <div class="card-body" id="input">
        <form class="card-text" action="/api/createpost/" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <label for="image">Upload Image:</label><br>
            <input type="file" id="image" name="image"><br><br>
            <label for="description">Description:</label><br>
            <input type="text" id="description" name="description"><br><br>
            <input type="submit" value="Submit">
        </form>
    </div>
</div>

{% else %}
<div class="px-4 py-5 my-5 text-center">
    <img class="d-block mx-auto mb-4" src="{% static 'images/user.png' %}" alt="" width="100" height="100">
    <h1 class="display-5 fw-bold">Social</h1>
    <div class="col-lg-6 mx-auto">
        <p class="lead mb-4">Welcome to Social, the largest social webspace in the world to share images with your
            friends!</p>
        <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
            <a href="{% url 'login' %}" type="button" class="btn btn-outline-primary btn-lg px-4 gap-3">Login</a>
            <a href="{% url 'signup' %}" type="button" class="btn btn-outline-secondary btn-lg px-4">Sign Up</a>
        </div>
    </div>

</div>
{% endif %}
<br>
<br>

{% for post in posts %}
<div class="card" style="width: 90%;">
    <img src="images/{{post.image}}" class="card-img-top" alt="...">
    <div class="card-body">
        <p class="card-text">{{post.description}}</p>
        <small class="text-muted">
            <a href="{% url 'profile' post.user.id %}">@{{ post.user.username }}</a> |
            {{ post.created_at }}
        </small>
    </div>
</div>

<br>
<br>
{% endfor %}

{% endblock %}